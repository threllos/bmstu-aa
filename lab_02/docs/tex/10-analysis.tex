\chapter{Аналитическая часть}

В этом разделе будут представлены описания алгоритмов нахождения редакторских расстояний Левенштейна и Дамерау-Левенштейна.

\section{Расстояние Левенштейна}

Редакторское расстояние (расстояние Левенштейна) -- это минимальное количество операций вставки, удаления и замены, необходимых для превращения одной строки в другую.
Каждая редакторская операция имеет цену (штраф).
Редакционное предписание -- последовательность действий, необходимых для получения из первой строки вторую, и минимизирующую суммарную цену (и является расстоянием Левенштейна).
В общем случае, имея на входе строку, $X = x_1x_2 \dots x_n$, и, $Y = y_1y_2 \dots y_n$, расстояние между ними можно вычислить с помощью операций:

\begin{itemize}
	\item $\text{delete}(u, \varepsilon) = \delta$;
    \item $\text{insert}(\varepsilon, v) = \delta$;
    \item $\text{replace}(u, v) = \alpha(u, v) \leq 0$  $($здесь, $\alpha(u, u) = 0$ $\forall$ $u).$
\end{itemize}

Необходимо найти последовательность замен с минимальным суммарным штрафом.
Далее, цена вставки, удаления и замены будет считаться равной 1.
Пусть даны строки: s1 = s1[1..L1], s2 = s2[1..L2], s1[1..i] -- подстрока s1 длинной i, начиная с 1-го символа, s2[1..j] - подстрока s2 длинной j, начиная с 1-го символа.
Расстояние Левентштейна посчитывается формулой \ref{form:lev}:

\begin{equation}
	\label{form:lev}
	D(S_1[1..i], S_2[1..j]) = 
	\begin{cases}
	  0, \text{i = 0, j = 0},\\
	  i, \text{i > 0, j = 0},\\
	  j, \text{i = 0, j > 0},\\
	  \min \lbrace \\
		\qquad D(S_1[1..i], S_2[1..j - 1]) + 1,\\
		\qquad D(S_1[1..i - 1], S_2[1..j]) + 1,\\
		\qquad D(S_1[1..i - 1], S_2[1..j - 1])\\ + \begin{cases}
		  0, \text{если }S_1[i] = S_2[j]\\
		  1, \text{иначе}\\
		\end{cases}\\
	  \rbrace, \text{иначе,}
	\end{cases}
\end{equation}
где $i$ $-$ длина $S_1$, $j$ $-$ длина $S_2$.

\section{Расстояние Дамерау-Левенштейна}

Расстояние Дамерау-Левенштейна -- модификация расстояния Левенштейна, добавляющая транспозицию к редакторским операциям, предложенными Левенштейном.

Используя условные обозначения, рекурсивная формула для нахождения расстояния Дамерау-Левенштейна, $f(i, j)$, между подстроками, $x_1 \dots x_i$ и, $y_1 \dots y_j$, имеет следующий вид \ref{form:d-lev}:

\begin{equation}
	\label{form:d-lev}
	D(S_1[1..i], S_2[1..j]) = 
	\begin{cases}
		0, \text{i = 0, j = 0,}\\
	  	i, \text{i > 0, j = 0,}\\
	  	j, \text{i = 0, j > 0,}\\
	  	\min \lbrace \\
	  	\qquad D(S_1[1..i], S_2[1..j - 1]) + 1,\\
	  	\qquad D(S_1[1..i - 1], S_2[1..j]) + 1,\\
	  	\qquad D(S_1[1..i - 1], S_2[1..j - 1]) + 
	  	\\
	  	\begin{cases}
			0, \text{если }S_1[i] = S_2[j]\\
			1, \text{иначе}\\
	  	\end{cases}\\
	  	\qquad D(S_1[1..i - 2], S_2[1..j - 2]) + \\f(S_1, i, S_2, j)\\
	  	\rbrace \text{, иначе,}
	\end{cases}
\end{equation} 
где $i$ -- длина $S_1$, $j$ -- длина $S_2$ и где функция $f$ определяется формулой \ref{form:f-function}:  
  
\begin{equation}
	\label{form:f-function}
	f(S_1, i, S_2, j) = 
	\begin{cases}
		1, S_1[i-1] = S_2[j] \text{ и } S_1[i] = S_2[j - 1]\\
	  	2, \text{иначе}\\
	\end{cases}
\end{equation}

\section{Итеративная реализация}

Рекурсивный алгоритм вычисления редакционного расстояния может быть не эффективен при больших $i$ и $j$, так как множество промежуточных значений $D(S_1[1..i], S_2[1..j])$ вычисляются не один раз, что сильно замедляет время выполнения программы.
В качестве оптимизации можно использовать буфер, который представляет из себя массив, для хранения промежуточных значений.
Буфер имеет размер \ref{form:buf}:
\begin{equation}
	\label{form:buf}
	len(S_1) + 1
\end{equation}
где $len(S_1)$ -- длина строки $S_1$.

Первые значения буфера заполняются по формуле \ref{form:buf-make}:
\begin{equation}
	\label{form:buf-make}
	buf[i] = i
\end{equation}
где $i$ -- i-ый элемент массива.

Далее значения буфера меняются по формулу \ref{form:buf-change}:
\begin{equation}
	\label{form:buf-change}
	buf[i] = \min \lbrace \\
		\text{buf[j-1] + 1,}\\
		\text{buf[j] + 1,}\\
		buf[j]
		+ \begin{cases}
		0, \text{если }S_1[i] = S_2[j] \\
		1, \text{иначе} \\
		\end{cases}
	\rbrace
\end{equation}
где $i$ -- длина $S_1$, $j$ -- длина $S_2$.

Результат вычисления расстояния Дамерау-Левенштейна будет ячейка буфера с индексом $i = length(S_1)$.

\section{Рекурсивная реализация с мемоизацией}

В качестве оптимизации рекурсивного алгоритма заполнения можно использовать кэш, который будет представлять собой матрицу.
Суть оптимизации -- при выполнении рекурсии происходит параллельное заполнение матрицы.
Если рекурсивный алгоритм выполняет прогон для данных, которые еще не были обработаны, то результат нахождения заносится в матрицу.
Иначе, если обработанные данные встречаются снова, то для них расстояние не находится и алгоритм переходит к следующему шагу.

\section*{Вывод}

Были рассмотрены обе вариации алгоритма редакторского расстояния (Левенштейна и Дамерау-Левенштейна).
Также были приведены разные способы реализации этих алгоритмов такие как: рекурсивный, итеративный и рекурсивный с мемоизацией.
Итеративный может быть реализован с помощью парадигм динамического программирования.
Рекурсивный алгоритм с мемоизацией позволяет ускорить обычный рекурсивный алгоритм за счет матрицы, в которой промежуточные подсчеты.

