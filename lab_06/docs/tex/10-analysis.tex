\chapter{Аналитическая часть}

\section{Цели и задачи}

Цель работы: изучить задачу коммивояжера и реализовать алгоритм полного перебора и муравьиный алгоритм для ее решения.

Задачи лабораторной работы:
\begin{enumerate}
	\item[1)] исследовать задачу коммивояжера;
	\item[2)] реализовать алгоритм полного перебора для решения задачи коммивояжера;
	\item[3)] реализовать муравьиный алгоритм для решения задачи коммивояжера;
	\item[4)] провести параметризацию муравьиного алгоритма на нескольких классах данных;
	\item[5)] провести сравнительный анализ времени работы двух алгоритмов для решения задачи коммивояжера на основе экспериментальных данных.
\end{enumerate}

\section{Задача коммивояжера}

Коммивояжёр --- разъездной представитель торговой фирмы, который по поручению фирмы ищет покупателей ее товаров, предлагая им образцы, рекламируя товар, распространяя каталоги товаров.

В классической постановке коммивояжёр должен объехать N городов по замкнутому маршруту, посетив каждый из них лишь однажды, таким образом, чтобы полная длина его маршрута была минимальной.
Если решать задачу коммивояжёра с помощью полного перебора --- перебором всех замкнутых путей, связывающих города, то придется проверить все возможные маршруты, то есть простой метод перебора всех вариантов чрезвычайно неэффективный при большом N. 
Эффективными же признаются решения, гарантирующие получение ответа за время, ограниченное полиномом от размерности задачи.
С помощью муравьиных алгоритмов находятся субоптимальные решения, локальные минимумы целевой функции, приближающиеся к абсолютному минимуму.

\section{Алгоритм полного перебора}

Самое простое решение --- попробовать все перестановки множества вершин и посмотреть, какая из них возвращает в результате наименьшую длину пути. 
Очевидно, что время работы данного алгоритма --- $O(n!)$. 
Это факториал количества вершин, поэтому данное решение становится непрактичным даже для небольшого числа вершин. 
С другой стороны, благодаря полному перебору алгоритм гарантирует получение пользователем корректного решения задачи коммивояжера.

\section{Муравьиный алгоритм}

Многократность взаимодействия мураьвев реализуется итерационным поиском маршрута коммивояжера одновременно несколькими муравьями. 
При этом каждый муравей рассматривается как отдельный, независимый коммивояжер, решающий свою задачу. 
За одну итерацию алгоритма каждый муравей совершает полный маршрут коммивояжера \cite{Shtovba2003}.

Положительная обратная связь реализуется как имитация поведения муравьев типа <<оставление следов --- перемещение по следам>>. 
Чем больше следов оставлено на тропе --- ребре графа в задаче коммивояжера, тем больше муравьев будет
передвигаться по ней. 
При этом на тропе появляются новые следы, привлекающие дополнительных муравьев. 
Для задачи коммивояжера положительная обратная связь реализуется следующим стохастическим правилом: вероятность включения ребра графа в маршрут муравья пропорциональна количеству феромона на нем \cite{Shtovba2003}.

Применение такого вероятностного правила обеспечивает реализацию и другой составляющей самоорганизации --- случайности. 
Количество откладываемого муравьем феромона на ребре графа обратно пропорционально длине маршрута. 
Чем короче маршрут, тем больше феромона будет отложено на соответствующих ребрах графа и тем больше муравьев будет использовать их при синтезе своих маршрутов. 
Отложенный на ребрах феромон выступает как усилитель, он позволяет хорошим маршрутам сохраняться в глобальной памяти муравейника. 
Эти маршруты могут быть улучшены на последующих итерациях алгоритма \cite{Shtovba2003}.

Использование только положительной обратной связи приводит к преждевременной сходимости решений --- к случаю, когда все муравьи двигаются одним и тем же субоптимальным маршрутом. 
Для избежания этого используется отрицательная обратная связь --- испарение феромона. 
Время испарения не должно быть слишком большим, так как при этом возникает опасность сходимости популяции маршрутов к одному субоптимальному решению. 
С другой стороны, время испарения не должно быть и слишком малым, так как это приводит к быстрому <<забыванию>>, потере памяти колонии и, следовательно, к некооперативному поведению муравьев. 
В поведении муравьев кооперативность является очень важной: множество идентичных муравьев одновременно исследуют разные точки пространства решений и передают свой опыт через изменения ячеек глобальной памяти муравейника \cite{Shtovba2003}.

Для каждого муравья переход из города $i$ в город $j$ зависит от трех составляющих: памяти муравья (tabu list), видимости и виртуального следа феромона \cite{Shtovba2003}.

Tabu list (память муравья) --- это список посещенных муравьем городов, заходить в которые еще раз нельзя.  
Используя этот список, муравей гарантированно не попадет в один и тот же город дважды. 
Ясно, что tabu list возрастает при совершении маршрута и обнуляется в начале каждой итерации алгоритма.  
Обозначим через $J_{i,k}$ список городов, которые еще необходимо посетить муравью $k$, находящемуся в городе $i$. 
Понятно, что $J_{i,k}$ является дополнением к tabu list \cite{Shtovba2003}.

Видимость --- величина, обратная расстоянию: $\eta_{ij} = frac{1}{D_{ij}}$, где $D_{ij}$ --- расстояние между городами $i$ и $j$. 
Видимость --- это локальная статическая информация, выражающая эвристическое желание посетить город $j$ из города $i$ --- чем ближе город, тем больше желание посетить его. 
Использование только видимости, конечно, является недостаточным для нахождения оптимального маршрута \cite{Shtovba2003}.

Виртуальный след феромона на ребре $(i, j)$ представляет подтвержденное муравьиным опытом желание посетить город $j$ из города $i$. 
В отличие от видимости след феромона является более глобальной и динамичной информацией --- она изменяется после каждой итерации алгоритма, отражая приобретенный муравьями опыт. 
Количество виртуального феромона на ребре $(i, j)$ на итерации $t$ обозначим через $\tau_{ij}(t)$ \cite{Shtovba2003}.

Важную роль в муравьиных алгоритмах играет вероятностно-пропорциональное правило, определяющее вероятность перехода $k$-го муравья из города $i$ в город $j$ на $t$-й итерации:
\begin{equation}
P_{ij,k}(t) = 
\begin{cases}
\frac{\tau^\alpha_{ij}(t) \cdot \eta^\beta_{ij}}{\displaystyle\sum_{l \in J_{i,k}}^{} \tau^\alpha_{il}(t) \cdot \eta^\beta_{il}}, & \text{если}~j \in J_{i,k}, \\
0, & \text{иначе},
\end{cases}
\end{equation}
где $\alpha$ и $\beta$ --- два регулируемых параметра, задающие веса следа феромона и видимости при выборе маршрута. 
При $\alpha = 0$ будет выбран ближайший город, что соответствует жадному алгоритму в классической теории оптимизации. 
Если $\beta = 0$, тогда работает лишь феромонное усиление, что влечет за собой быстрое вырождение маршрутов к одному субоптимальному решению \cite{Shtovba2003}.

После завершения маршрута каждый муравей $k$ откладывает на ребре $(i, j)$ такое количество феромона:
\begin{equation}
\Delta \tau_{ij,k}(t) = 
\begin{cases}
\frac{Q}{L_{k}(t)}, & \text{если}~(i, j) \in T_{k}(t), \\
0, & \text{иначе},
\end{cases}
\end{equation}
где $T_{k}(t)$ --- маршрут, пройденный муравьем $k$ на итерации $t$; $L_{k}(t)$ --- длина этого маршрута; $Q$ --- регулируемый параметр, значение которого выбирают одного порядка с длиной оптимального маршрута \cite{Shtovba2003}.

Для исследования всего пространства решений необходимо обеспечить испарение феромона --- уменьшение во времени количества отложенного на предыдущих итерациях феромона. 
Обозначим коэффициент испарения феромона через $p \in [0, 1]$. Тогда правило обновления феромона примет вид:
\begin{equation}
\tau_{ij}(t + 1) = (1 - p) \cdot \tau_{ij}(t) + \Delta \tau_{ij}(t),
\end{equation}
где $\Delta \tau_{ij}(t) = \displaystyle\sum_{k = 1}^{m} \Delta \tau_{ij,k}(t)$, $m$ --- количество муравьев в колонии \cite{Shtovba2003}.

В начале оптимизации количество феромона принимается равным небольшому положительному числу $\tau_0$. 
Общее количество муравьев в колонии остается постоянным на протяжении выполнения алгоритма. 
Многочисленная колония приводит к быстрому усилению субоптимальных маршрутов, а когда муравьев мало, возникает опасность потери кооперативности поведения через ограниченное взаимодействие и быстрое испарение феромона. 
Обычно число муравьев назначают равным количеству городов --- каждый муравей начинает маршрут со своего города \cite{Shtovba2003}.

\section*{Вывод}

В текущем разделе была рассмотрена задача коммивояжера, а также алгоритм полного перебора и муравьиный алгоритм для ее решения.